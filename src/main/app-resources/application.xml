<?xml version="1.0" encoding="us-ascii"?>
<application xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="application">
  <jobTemplates>
    <jobTemplate id="dataprep">
      <streamingExecutable>/application/node_dataprep/run.R</streamingExecutable>
      <defaultParameters>
        <parameter abstract="CSV data from data catalogue (*.csv)" id="data" maxOccurs="10" minOccurs="0" scope="runtime" title="Water Level Time-series Data, EO or In-situ" type="LiteralData">https://catalog.terradue.com/fanfar-00001/cat/AMWL/search</parameter>
        <parameter abstract="HYPE model identifier" id="modelVersion" maxOccurs="1" minOccurs="0" scope="runtime" title="HYPE model identifier" type="LiteralData">
          <options>
            <option>niger-hype-2.23</option>
            <option>westafrica-hype-1.3.1</option>
            <default>niger-hype-2.23</default>
          </options>
        </parameter>
      </defaultParameters>
      <defaultJobconf>
        <property id="mapred.task.timeout">6000000</property>
      </defaultJobconf>
    </jobTemplate>
      <jobTemplate id="postprocess">
      <streamingExecutable>/application/node_postprocess/run.R</streamingExecutable>
      <defaultParameters>
        <parameter abstract="Forecast Date" id="idate" maxOccurs="1" minOccurs="1" scope="runtime" title="Forecast issue date (yyyy-mm-dd)" type="LiteralData">2018-09-01</parameter >
        <parameter abstract="Select country or Basin" id="area" maxOccurs="1" minOccurs="1" scope="runtime" title="Select your area of Interest" type="LiteralData">
          <options>
            <option>Benin</option>
            <option>Burkina Faso</option>
            <option>Cape Verde</option>
            <option>Chad</option>
            <option>Gambia, The</option>
            <option>Ghana</option>
            <option>Guinea</option>
            <option>Guinea-Bissau</option>
            <option>Ivory Coast</option>
            <option>Liberia</option>
            <option>Mali</option>
            <option>Mauritania</option>
            <option>Niger</option>
            <option>Nigeria</option>
            <option>Senegal</option>
            <option>Sierra Leone</option>
            <option>Togo</option>
            <option>Niger Basin</option>
            <default>wa</default>
          </options>
        </parameter>
        <parameter abstract="Selected Model" id="model" maxOccurs="1" minOccurs="1" scope="runtime" title="Choose the hydrological model" type="LiteralData">
          <options>
            <option>niger-hype</option>
            <option>ww-hype</option>
            <option>mosaic-hype</option>
            <default>niger-hype</default>
          </options>
        </parameter>
        <parameter abstract="Select output variables" id="timeOutputData" maxOccurs="1" minOccurs="1" scope="runtime" title="Forecast Output variables" type="LiteralData">
          <options>
            <option>timeCOUT</option>
            <option>timeCPRC</option>
            <default>timeCOUT</default>
          </options>
        </parameter>
        <parameter abstract="All basins or flood-prone area" id="filterZone" maxOccurs="1" minOccurs="1" scope="runtime" title="All basins or flood-prone area within the AOI" type="LiteralData">
          <options>
            <option>all-subbasins</option>
            <option>flood-prone-are</option>
            <default>all-subbasins</default>
          </options>
        </parameter>
        <parameter abstract="Select alert method" id="alertMethod" maxOccurs="1" minOccurs="1" scope="runtime" title="Choose the method for defining alert levels" type="LiteralData">
          <options>
            <option>none</option>
            <option>hypethreshold</option>
            <option>historicyear</option>
            <option>waffi</option>
            <default>none</default>
          </options>
        </parameter>
        <parameter abstract="Select data source" id="datasource" maxOccurs="1" minOccurs="1" scope="runtime" title="Choose data source if alert method is historical year" type="LiteralData">
          <options>
            <option>modeledhistorical</option>
            <option>observedvalues</option>
            <default>observedvalues</default>
          </options>
        </parameter>
        <parameter abstract="Specify historical year" id="year" maxOccurs="1" minOccurs="1" scope="runtime" title="Choose historical year if alert method is historical year" type="LiteralData">2012</parameter>
        <parameter abstract="Select data source" id="datasource" maxOccurs="1" minOccurs="1" scope="runtime" title="Choose data source if alert method is historical year" type="LiteralData">
          <options>
            <option>modeledhistorical</option>
            <option>observedvalues</option>
            <default>observedvalues</default>
          </options>
        </parameter>
        <parameter abstract="Return Periods (years) or Percentage values" id="returnPeriod" maxOccurs="1" minOccurs="1" scope="runtime" title="Return Periods (years) or Percentage values" type="LiteralData">2,5,30</parameter>
        <parameter abstract="Plot imapct map" id="impactIndex" maxOccurs="1" minOccurs="1" scope="runtime" title="Indicate whether to plot the impact map or not" type="LiteralData">
          <options>
            <option>TRUE</option>
            <option>FALSE</option>
            <default>TRUE</default>
          </options>
        </parameter>
        <parameter abstract="PHI (1) or PAI (2) " id="popMethod" maxOccurs="1" minOccurs="1" scope="runtime" title="PHI (1) or PAI (2)" type="LiteralData">1</parameter>
        <parameter abstract="Notification settings" id="notificationSettings" maxOccurs="1" minOccurs="1" scope="runtime" title="Indicate whether to plot the impact map or not" type="LiteralData">
          <options>
            <option>1+2+3</option>
            <option>2+3</option>
            <default>3</default>
          </options>
        </parameter>
      </defaultParameters>
      <defaultJobconf>
        <property id="mapred.task.timeout">6000000</property>
      </defaultJobconf>
    </jobTemplate>
  </jobTemplates>
    <workflow id="fanfar-post-processing" title="FANFAR Post-processing Service" abstract=" FANFAR Post-processing Service">
    <workflowVersion>1.0</workflowVersion>
    <node id="node_dataprep">
      <job id="dataprep"/>
      <sources>
        <source id="source" title="Simple string sources" abstract="List of comma-separated strings" refid="string:list" scope="runtime">input-1,input-2,input-3</source>
      </sources>
    </node>
    <node id="node_postprocess">
      <job id="postprocess"/>
      <sources>
        <source refid="wf:node">node_dataprep</source>
      </sources>
    </node>
  </workflow>
</application>
